"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[641],{8641:(Q,c,r)=>{r.r(c),r.d(c,{UserDetailsModule:()=>D});var u=r(6814),p=r(6208),i=r(480),d=r(5861),e=r(4769),s=r(95),f=r(1803),h=r(8763),v=r(74),g=r(2814),y=r(2490),b=r(9926),x=r(9317);function w(l,m){if(1&l&&e._UZ(0,"app-input",8),2&l){const t=e.oxw().$implicit,o=e.oxw();let a,n;e.s9C("formControlName",t.value),e.Q6J("name",t.value)("placeholder",t.placeholder)("errors",(null==(a=o.form.get(t.value))?null:a.errors)||null)("touched",!(null==(n=o.form.get(t.value))||!n.touched))("type",t.type)("label",t.label)}}const U=function(){return[]};function C(l,m){if(1&l&&(e.TgZ(0,"div")(1,"label")(2,"p"),e._uU(3),e.qZA()(),e._UZ(4,"ng-select",9),e.qZA()),2&l){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.label),e.xp6(1),e.s9C("formControlName",t.value),e.Q6J("items",t.options||e.DdM(4,U))("clearable",!1)}}function N(l,m){if(1&l&&(e.ynx(0),e.YNc(1,w,1,7,"app-input",6),e.YNc(2,C,5,5,"div",7),e.BQk()),2&l){const t=m.$implicit;e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.options)),e.xp6(1),e.Q6J("ngIf",(null==t?null:t.options)&&(null==t||null==t.options?null:t.options.length))}}let T=(()=>{class l{constructor(t,o,a,n){this.formBuilder=t,this.router=o,this.usersService=a,this.toastrService=n,this.fields=[{label:"Primeiro nome",value:"firstName",type:"text",placeholder:"Luara"},{label:"Sobrenome",value:"lastName",type:"text",placeholder:"Seib"},{label:"Idade",value:"age",type:"number",placeholder:"36"},{label:"G\xeanero",value:"gender",type:"text",placeholder:"Feminino",options:[{label:"Masculino",value:"male"},{label:"Feminino",value:"female"},{label:"Outro",value:"other"}]},{label:"Tipo de usu\xe1rio",value:"userType",type:"text",placeholder:"Cuidador",options:[{label:"Cuidador",value:"caregiver"},{label:"Idoso",value:"oldPerson"}]},{label:"E-mail",value:"email",type:"email",placeholder:"email@example"},{label:"Telefone",value:"phone",type:"text",placeholder:"(12)34567-8910"}],this.router=(0,e.f3M)(i.F0),this.form=this.formBuilder.group(this.fields.reduce((Z,I)=>({...Z,[I.value]:new s.NI(null,[s.kI.required])}),{}))}ngOnInit(){const t=this.usersService.getUserFromLocalStorage();t?.firstName&&this.form.get("firstName").setValue(t?.firstName),t?.lastName&&this.form.get("lastName").setValue(t?.lastName),t?.age&&this.form.get("age").setValue(t?.age),t?.gender&&this.form.get("gender").setValue(t?.gender),t?.userType&&this.form.get("userType").setValue(t?.userType),t?.email&&this.form.get("email").setValue(t?.email),t?.phone&&this.form.get("phone").setValue(t?.phone)}save(){var t=this;return(0,d.Z)(function*(){try{if(!t.form.valid)return;const o=t.usersService.getUserFromLocalStorage(),a=yield t.usersService.updateUser(o._id,t.form.value);t.usersService.setUserOnLocalStorage(a.user),t.toastrService.success("Atualizado com sucesso"),t.router.navigateByUrl("/actions")}catch(o){t.toastrService.error(o?.error?.message||"Erro")}})()}static#e=this.\u0275fac=function(o){return new(o||l)(e.Y36(s.qu),e.Y36(i.F0),e.Y36(f.f),e.Y36(h._W))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-user-details"]],decls:7,vars:6,consts:[[3,"title","navigateTo"],[1,"md:tw-border","md:tw-border-grey-light-20","md:tw-p-8","tw-w-full","md:tw-h-fit","md:tw-rounded-md","md:tw-mx-auto"],[1,"tw-h-full","md:tw-h-2/3","tw-flex","tw-flex-col","tw-gap-2","md:tw-w-1/2","md:tw-mx-auto",3,"formGroup"],[1,"tw-grid","tw-grid-cols-2","tw-gap-2","tw-mt-6","tw-mb-auto","md:tw-my-0"],[4,"ngFor","ngForOf"],[3,"width","label","click"],[3,"formControlName","name","placeholder","errors","touched","type","label",4,"ngIf"],[4,"ngIf"],[3,"formControlName","name","placeholder","errors","touched","type","label"],["appendTo","body","bindLabel","label","bindValue","value",1,"custom",3,"items","formControlName","clearable"]],template:function(o,a){1&o&&(e._UZ(0,"app-header",0),e.TgZ(1,"div",1)(2,"app-body")(3,"form",2)(4,"div",3),e.YNc(5,N,3,2,"ng-container",4),e.qZA(),e.TgZ(6,"app-button",5),e.NdJ("click",function(){return a.save()}),e.qZA()()()()),2&o&&(e.Q6J("title","Detalhes de usu\xe1rio")("navigateTo","actions"),e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(2),e.Q6J("ngForOf",a.fields),e.xp6(1),e.Q6J("width","tw-w-full")("label","Salvar"))},dependencies:[u.sg,u.O5,v.G,s._Y,s.JJ,s.JL,s.sg,s.u,g.O,y.r,b.a,x.w9]})}return l})();var S=r(9862);const J=[{path:"",component:T}];let F=(()=>{class l{static#e=this.\u0275fac=function(o){return new(o||l)};static#t=this.\u0275mod=e.oAB({type:l});static#l=this.\u0275inj=e.cJS({imports:[i.Bz.forChild(J),S.JF,i.Bz]})}return l})(),D=(()=>{class l{static#e=this.\u0275fac=function(o){return new(o||l)};static#t=this.\u0275mod=e.oAB({type:l});static#l=this.\u0275inj=e.cJS({imports:[u.ez,p.m,F]})}return l})()}}]);